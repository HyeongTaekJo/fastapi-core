2025-04-08 08:38:53,861 [DEBUG] [req_id:489ce273-4ae3-477c-9bf7-f3286c406d51 user:None] connection.py:960 - caching sha2: Trying full auth...
2025-04-08 08:38:53,869 [DEBUG] [req_id:489ce273-4ae3-477c-9bf7-f3286c406d51 user:None] connection.py:982 - -----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnUx08t90yOpt6ZB/xPQz
ABEZkUDmJZVUgnVUOMcW0qxF5FwvX1TgLKM10ADWRzW6AbNlQbDwIeyphO3F7dBb
LeL0pNdnnj+iQThKzBMxaHsc6HSEVxaYPNRfnMsL5NLXjEh+QBJpgmkQJlqWisyO
9PdDZdmtha6ZH/x2tEyUJ0gkfEJxCXNiXcj9VPzypngzl6kNifnDT5Z3zfQ+m1sq
/iLIqq2kruepHz9YvkN7iw+HRVwWY0+F8HkwXdnXdJIJEKRVi7xWayfeOeuHrgGT
VZqefCkPrgEnV5RhQvde0wQiEp+dV20Yunv5bcGxhMKF8zGZnxtA0qYtRnsAdp4p
iwIDAQAB
-----END PUBLIC KEY-----

2025-04-08 08:38:58,113 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379. | POST /auth/login/email
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    |     return await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    |     tokens = await auth_service.login_user(user)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    |     await self.authRepository.save_refresh_token(user.id, refresh_token)
    |   File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    |     await self.redis.set(
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    |     await self.ensure_connection(connection)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    |     await connection.connect()
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    tokens = await auth_service.login_user(user)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    await self.authRepository.save_refresh_token(user.id, refresh_token)
  File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    await self.redis.set(
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    await self.ensure_connection(connection)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-04-08 08:41:00,920 [DEBUG] [req_id:7d9da681-fdbb-4a6b-8712-8e1f488499a5 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 08:41:05,050 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379. | POST /auth/login/email
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    |     return await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    |     tokens = await auth_service.login_user(user)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    |     await self.authRepository.save_refresh_token(user.id, refresh_token)
    |   File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    |     await self.redis.set(
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    |     await self.ensure_connection(connection)
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    |     await connection.connect()
    |   File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    tokens = await auth_service.login_user(user)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    await self.authRepository.save_refresh_token(user.id, refresh_token)
  File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    await self.redis.set(
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    await self.ensure_connection(connection)
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "C:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-04-08 08:41:52,643 [DEBUG] [req_id:7ec1bd2a-c841-4686-a772-19fef2748467 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 08:41:56,784 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379. | POST /auth/login/email
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    |     tokens = await auth_service.login_user(user)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    |     await self.authRepository.save_refresh_token(user.id, refresh_token)
    |   File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    |     await self.redis.set(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    |     await self.ensure_connection(connection)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    |     await connection.connect()
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    tokens = await auth_service.login_user(user)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    await self.authRepository.save_refresh_token(user.id, refresh_token)
  File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    await self.redis.set(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    await self.ensure_connection(connection)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-04-08 08:50:54,871 [DEBUG] [req_id:ad710eb9-20c1-4843-8623-bd6258e23fb2 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 08:50:59,106 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379. | POST /auth/login/email
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    |     tokens = await auth_service.login_user(user)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    |     await self.authRepository.save_refresh_token(user.id, refresh_token)
    |   File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    |     await self.redis.set(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    |     await self.ensure_connection(connection)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    |     await connection.connect()
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 28, in post_login_email
    tokens = await auth_service.login_user(user)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 134, in login_user
    await self.authRepository.save_refresh_token(user.id, refresh_token)
  File "C:\Users\User\source\fastapi-core\src\auth\repository.py", line 11, in save_refresh_token
    await self.redis.set(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1213, in get_connection
    await self.ensure_connection(connection)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error Multiple exceptions: [Errno 10061] Connect call failed ('::1', 6379, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 6379) connecting to localhost:6379.
2025-04-08 08:52:08,009 [INFO] [req_id:a4d19e68-4cc5-469f-8cb2-0e9700d158a2 user:None] base.py:35 - POST /auth/login/email [200] 0.1022s
2025-04-08 08:53:24,792 [INFO] [req_id:97bc89cf-1e0e-444f-9f27-9835865297b7 user:3] base.py:35 - POST /auth/token/access [200] 0.0096s
2025-04-08 08:53:29,748 [INFO] [req_id:5e367690-cb28-4626-955f-465b3fa4998f user:3] base.py:35 - POST /auth/token/refresh [200] 0.0131s
2025-04-08 08:53:36,502 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.id = %s]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8) | GET /users/id/1
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 657, in _read_bytes
    data = await self._reader.readexactly(num_bytes)
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\streams.py", line 706, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 4 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 609, in _read_packet
    packet_header = await self._read_bytes(4)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 661, in _read_bytes
    raise OperationalError(CR.CR_SERVER_LOST, msg) from e
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\user\route.py", line 38, in get_user_by_id
    user : UserModel = await userRepository.get_user_by_id(id)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 18, in get_user_by_id
    return await self.session.scalar(select(UserModel).where(UserModel.id == id))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 609, in _read_packet
    packet_header = await self._read_bytes(4)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 661, in _read_bytes
    raise OperationalError(CR.CR_SERVER_LOST, msg) from e
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.id = %s]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-08 08:58:44,134 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8) | GET /users/id/1
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 527, in _connect
    self._reader, self._writer = await \
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\tasks.py", line 408, in wait_for
    return await fut
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 88, in _open_connection
    transport, _ = await loop.create_connection(
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\base_events.py", line 1084, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 3308, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 3308)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 718, in checkout
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    dbapi_connection = rec.get_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 838, in get_connection
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\user\route.py", line 38, in get_user_by_id
    user : UserModel = await userRepository.get_user_by_id(id)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 18, in get_user_by_id
    return await self.session.scalar(select(UserModel).where(UserModel.id == id))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 718, in checkout
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    dbapi_connection = rec.get_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 838, in get_connection
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-08 08:58:52,164 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8) | POST /auth/login/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 527, in _connect
    self._reader, self._writer = await \
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\tasks.py", line 408, in wait_for
    return await fut
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 88, in _open_connection
    transport, _ = await loop.create_connection(
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\base_events.py", line 1084, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 3308, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 3308)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 718, in checkout
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    dbapi_connection = rec.get_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 838, in get_connection
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 21, in basic_token
    user = await auth_service.authenticate_with_email_password(
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 114, in authenticate_with_email_password
    user = await self.userRepository.get_user_by_email(email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 718, in checkout
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    dbapi_connection = rec.get_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 838, in get_connection
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-08 09:11:43,998 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8) | POST /auth/login/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 527, in _connect
    self._reader, self._writer = await \
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\tasks.py", line 408, in wait_for
    return await fut
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 88, in _open_connection
    transport, _ = await loop.create_connection(
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\base_events.py", line 1084, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 3308, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 3308)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 718, in checkout
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    dbapi_connection = rec.get_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 838, in get_connection
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 21, in basic_token
    user = await auth_service.authenticate_with_email_password(
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 114, in authenticate_with_email_password
    user = await self.userRepository.get_user_by_email(email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 718, in checkout
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 716, in checkout
    dbapi_connection = rec.get_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 838, in get_connection
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-08 09:11:53,411 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8) | POST /auth/login/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 527, in _connect
    self._reader, self._writer = await \
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\tasks.py", line 408, in wait_for
    return await fut
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 88, in _open_connection
    transport, _ = await loop.create_connection(
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\base_events.py", line 1084, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 3308, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 3308)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 713, in checkout
    rec = pool._do_get()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 675, in __init__
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 21, in basic_token
    user = await auth_service.authenticate_with_email_password(
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 114, in authenticate_with_email_password
    user = await self.userRepository.get_user_by_email(email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 713, in checkout
    rec = pool._do_get()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 675, in __init__
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-08 09:12:41,073 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8) | POST /auth/login/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 527, in _connect
    self._reader, self._writer = await \
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\tasks.py", line 408, in wait_for
    return await fut
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 88, in _open_connection
    transport, _ = await loop.create_connection(
  File "c:\Users\User\anaconda3\envs\backend\lib\asyncio\base_events.py", line 1084, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 10061] Connect call failed ('::1', 3308, 0, 0), [Errno 10061] Connect call failed ('127.0.0.1', 3308)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 713, in checkout
    rec = pool._do_get()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 675, in __init__
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 21, in basic_token
    user = await auth_service.authenticate_with_email_password(
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 114, in authenticate_with_email_password
    user = await self.userRepository.get_user_by_email(email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3274, in connect
    return self._connection_cls(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 3298, in raw_connection
    return self.pool.connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 713, in checkout
    rec = pool._do_get()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\impl.py", line 177, in _do_get
    return self._create_connection()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 675, in __init__
    self.__connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 901, in __connect
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\pool\base.py", line 897, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 270, in connect
    await_only(creator_fn(*arg, **kw)),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 75, in _connect
    await conn._connect()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 563, in _connect
    raise OperationalError(
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-08 09:54:31,837 [DEBUG] [req_id:3575cb14-ea38-457b-a6ea-5e3b3e0701bd user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 09:54:31,884 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.ProgrammingError) (1146, "Table 'mysql-server.user' doesn't exist")
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.email = %s]
[parameters: ('jht2@naver.com',)]
(Background on this error at: https://sqlalche.me/e/20/f405) | POST /auth/login/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'mysql-server.user' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 21, in basic_token
    user = await auth_service.authenticate_with_email_password(
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 114, in authenticate_with_email_password
    user = await self.userRepository.get_user_by_email(email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'mysql-server.user' doesn't exist")
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.email = %s]
[parameters: ('jht2@naver.com',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-08 09:54:39,779 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.ProgrammingError) (1146, "Table 'mysql-server.user' doesn't exist")
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.email = %s]
[parameters: ('jht@naver.com',)]
(Background on this error at: https://sqlalche.me/e/20/f405) | POST /auth/login/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'mysql-server.user' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 21, in basic_token
    user = await auth_service.authenticate_with_email_password(
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 114, in authenticate_with_email_password
    user = await self.userRepository.get_user_by_email(email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'mysql-server.user' doesn't exist")
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.email = %s]
[parameters: ('jht@naver.com',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-08 09:55:20,227 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.ProgrammingError) (1146, "Table 'mysql-server.user' doesn't exist")
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.email = %s]
[parameters: ('jht@naver.com',)]
(Background on this error at: https://sqlalche.me/e/20/f405) | POST /auth/register/email
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'mysql-server.user' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 43, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 144, in register_user
    existing_user = await self.userRepository.get_user_by_email(user_data.email)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 15, in get_user_by_email
    return await self.session.scalar(select(UserModel).where(UserModel.email == email))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 519, in scalar
    return await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2413, in scalar
    return self._execute_internal(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'mysql-server.user' doesn't exist")
[SQL: SELECT user.nickname, user.email, user.password, user.`role`, user.id, user.created_at, user.updated_at 
FROM user 
WHERE user.email = %s]
[parameters: ('jht@naver.com',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-08 09:58:19,800 [DEBUG] [req_id:3a9c3084-aa96-47ce-9988-cbad57fb433b user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 09:58:19,944 [INFO] [req_id:3a9c3084-aa96-47ce-9988-cbad57fb433b user:None] base.py:35 - POST /auth/register/email [200] 0.1793s
2025-04-08 09:58:22,957 [INFO] [req_id:74f916d2-4073-4d12-90e5-95572abdb231 user:None] base.py:35 - POST /auth/login/email [200] 0.076s
2025-04-08 09:58:33,800 [INFO] [req_id:d2106282-b700-4400-8b4b-1b5befac4a9e user:1] base.py:35 - POST /auth/token/access [200] 0.0034s
2025-04-08 09:58:37,720 [INFO] [req_id:032203b0-ecc6-40d5-8ade-b72c9159e08e user:1] base.py:35 - POST /auth/token/refresh [200] 0.0038s
2025-04-08 09:58:41,374 [INFO] [req_id:41fb69cd-3f5c-4b1b-b142-8c04349cbecb user:None] base.py:35 - GET /users/id/1 [200] 0.0132s
2025-04-08 09:58:45,402 [INFO] [req_id:06458c84-ea39-4a3e-b111-1ea34bcb4c98 user:None] base.py:35 - GET /users/email/jht@naver.com [200] 0.0422s
2025-04-08 09:58:52,355 [INFO] [req_id:11d6551d-05b6-4718-918a-8e5b3a747448 user:1] base.py:35 - POST /posts/random [200] 0.0521s
2025-04-08 09:58:55,835 [INFO] [req_id:f56d2bdb-fe62-4eed-a554-a66a59f06b3e user:1] base.py:35 - GET /posts [200] 0.0301s
2025-04-08 09:59:03,040 [INFO] [req_id:618d66fe-55c3-49ca-a35f-b5cff9bebf6f user:1] base.py:35 - GET /posts/100 [200] 0.0223s
2025-04-08 10:24:53,016 [WARNING] [req_id:b3413f29-85c7-4c69-aa53-6c3cf0254c31 user:1] handlers.py:64 - Unhandled HTTPException: 404 - Not Found | DELETE /auth/logout
2025-04-08 10:24:53,018 [INFO] [req_id:b3413f29-85c7-4c69-aa53-6c3cf0254c31 user:1] base.py:35 - DELETE /auth/logout [404] 0.0025s
2025-04-08 10:25:00,737 [WARNING] [req_id:02d39d97-6a3c-460d-bf21-1ed5e8e5798f user:1] handlers.py:64 - Unhandled HTTPException: 405 - Method Not Allowed | DELETE /auth/logout
2025-04-08 10:25:00,740 [INFO] [req_id:02d39d97-6a3c-460d-bf21-1ed5e8e5798f user:1] base.py:35 - DELETE /auth/logout [405] 0.0042s
2025-04-08 10:25:09,985 [INFO] [req_id:e99dfb6c-9598-467a-9699-1861796c81a1 user:1] base.py:35 - POST /auth/logout [200] 0.0213s
2025-04-08 10:25:19,615 [WARNING] [req_id:07c4eb8e-ad39-4fc4-8f32-fcb861ab106e user:1] handlers.py:64 - Unhandled HTTPException: 401 - 로그아웃된 토큰입니다. | POST /auth/logout
2025-04-08 10:25:19,617 [INFO] [req_id:07c4eb8e-ad39-4fc4-8f32-fcb861ab106e user:1] base.py:35 - POST /auth/logout [401] 0.0039s
2025-04-08 10:26:29,608 [DEBUG] [req_id:c1925d0d-701a-422a-bc9b-75bb476335f2 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 10:26:29,753 [INFO] [req_id:c1925d0d-701a-422a-bc9b-75bb476335f2 user:None] base.py:35 - POST /auth/login/email [200] 0.1552s
2025-04-08 10:26:42,278 [INFO] [req_id:0d01a6f8-639f-4561-b4a8-a50438389729 user:1] base.py:35 - POST /auth/logout [200] 0.008s
2025-04-08 10:33:27,326 [WARNING] [req_id:3f4da7fc-4c50-407d-9e0f-85ba9ef4c9b8 user:1] handlers.py:64 - Unhandled HTTPException: 401 - 로그아웃된 토큰입니다. | POST /auth/logout
2025-04-08 10:33:27,329 [INFO] [req_id:3f4da7fc-4c50-407d-9e0f-85ba9ef4c9b8 user:1] base.py:35 - POST /auth/logout [401] 0.0065s
2025-04-08 10:39:56,016 [DEBUG] [req_id:3344c9ff-44b5-4357-a12d-402aeb3f6ca8 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 10:39:56,159 [INFO] [req_id:3344c9ff-44b5-4357-a12d-402aeb3f6ca8 user:None] base.py:35 - POST /auth/login/email [200] 0.1704s
2025-04-08 10:41:37,641 [INFO] [req_id:bb619e4d-4cd3-4625-86a9-73fae7f4733b user:1] base.py:35 - POST /auth/logout [200] 0.0285s
2025-04-08 10:42:58,197 [DEBUG] [req_id:72e979b4-5d8f-4451-a720-2d66e2e298c7 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 10:42:58,335 [INFO] [req_id:72e979b4-5d8f-4451-a720-2d66e2e298c7 user:None] base.py:35 - POST /auth/login/email [200] 0.1482s
2025-04-08 10:44:29,995 [INFO] [req_id:12a75a55-324c-49c6-9b6e-dc3280dbaa2f user:None] base.py:35 - POST /auth/login/email [200] 0.1297s
2025-04-08 10:44:35,463 [DEBUG] [req_id:2fc9acef-c8b7-4ca0-96b5-98b4d797b69d user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 10:44:35,605 [INFO] [req_id:2fc9acef-c8b7-4ca0-96b5-98b4d797b69d user:None] base.py:35 - POST /auth/login/email [200] 0.166s
2025-04-08 10:54:47,671 [DEBUG] [req_id:4e7d7015-4ab0-4128-b044-3a4ddc59a6c3 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 10:54:47,822 [INFO] [req_id:4e7d7015-4ab0-4128-b044-3a4ddc59a6c3 user:None] base.py:35 - POST /auth/login/email [200] 0.1772s
2025-04-08 10:54:51,153 [INFO] [req_id:61d5b468-97b7-4c9e-bf47-f10304636fd9 user:1] base.py:35 - POST /auth/logout [200] 0.0084s
2025-04-08 12:57:21,162 [DEBUG] [req_id:c77c11c6-ab7c-4dc1-a9ef-fe11b10f0c27 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 12:57:21,327 [INFO] [req_id:c77c11c6-ab7c-4dc1-a9ef-fe11b10f0c27 user:None] base.py:35 - POST /auth/login/email [200] 0.2092s
2025-04-08 12:57:26,736 [DEBUG] [req_id:f72f21a4-ffa7-4512-b096-371cabf1f228 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 12:57:26,873 [INFO] [req_id:f72f21a4-ffa7-4512-b096-371cabf1f228 user:None] base.py:35 - POST /auth/login/email [200] 0.1618s
2025-04-08 12:59:07,383 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: UserModel에 존재하지 않는 필드입니다: login_id | POST /auth/login/login_id
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 44, in basic_token
    |     user = await auth_service.authenticate_with_field(field, identifier, password)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 126, in authenticate_with_field
    |     user = await self.user_repository.get_user_by_field(field, identifier)
    |   File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 20, in get_user_by_field
    |     raise ValueError(f"UserModel에 존재하지 않는 필드입니다: {field}")
    | ValueError: UserModel에 존재하지 않는 필드입니다: login_id
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 51, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
  File "C:\Users\User\source\fastapi-core\src\auth\tokens\basic_token.py", line 44, in basic_token
    user = await auth_service.authenticate_with_field(field, identifier, password)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 126, in authenticate_with_field
    user = await self.user_repository.get_user_by_field(field, identifier)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 20, in get_user_by_field
    raise ValueError(f"UserModel에 존재하지 않는 필드입니다: {field}")
ValueError: UserModel에 존재하지 않는 필드입니다: login_id
2025-04-08 13:04:34,771 [DEBUG] [req_id:a61aa37a-9b9b-4e41-97f2-eb788b609ab3 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:04:34,811 [WARNING] [req_id:a61aa37a-9b9b-4e41-97f2-eb788b609ab3 user:None] handlers.py:64 - Unhandled HTTPException: 401 - 존재하지 않는 사용자입니다. | POST /auth/login/login_id
2025-04-08 13:04:34,812 [INFO] [req_id:a61aa37a-9b9b-4e41-97f2-eb788b609ab3 user:None] base.py:35 - POST /auth/login/login_id [401] 0.0688s
2025-04-08 13:05:17,489 [INFO] [req_id:3bcac12e-4c0d-40e9-ae75-26d402add978 user:None] base.py:35 - POST /auth/login/login_id [200] 0.1169s
2025-04-08 13:05:50,226 [WARNING] [req_id:b1e9df21-32d4-47eb-8de2-2b5c94663971 user:1] handlers.py:64 - Unhandled HTTPException: 401 - 유효하지 않은 Refresh Token 입니다. | POST /auth/token/access
2025-04-08 13:05:50,227 [INFO] [req_id:b1e9df21-32d4-47eb-8de2-2b5c94663971 user:1] base.py:35 - POST /auth/token/access [401] 0.0083s
2025-04-08 13:06:08,293 [WARNING] [req_id:927af533-30c3-4944-b523-a9d50cf11a1b user:1] handlers.py:64 - Unhandled HTTPException: 401 - 유효하지 않은 Refresh Token 입니다. | POST /auth/token/access
2025-04-08 13:06:08,294 [INFO] [req_id:927af533-30c3-4944-b523-a9d50cf11a1b user:1] base.py:35 - POST /auth/token/access [401] 0.0076s
2025-04-08 13:06:18,543 [INFO] [req_id:3bd25185-114e-4a4f-bb41-8f60a6b9e967 user:None] base.py:35 - POST /auth/login/login_id [200] 0.1216s
2025-04-08 13:06:29,404 [INFO] [req_id:1c72c89a-f0e9-4349-82aa-bbc372a09fed user:1] base.py:35 - POST /auth/token/access [200] 0.0057s
2025-04-08 13:06:33,984 [INFO] [req_id:a0cb909f-fed4-42eb-8006-5e3763f55892 user:1] base.py:35 - POST /auth/token/refresh [200] 0.0057s
2025-04-08 13:06:41,724 [INFO] [req_id:d7cddb52-85c9-40ae-8630-b533fbef8009 user:None] base.py:35 - POST /auth/login/email [200] 0.0947s
2025-04-08 13:06:44,249 [WARNING] [req_id:91bf3f6c-b34c-4b14-a1c5-f0225cc14b2f user:1] handlers.py:64 - Unhandled HTTPException: 401 - 유효하지 않은 Refresh Token 입니다. | POST /auth/token/access
2025-04-08 13:06:44,251 [INFO] [req_id:91bf3f6c-b34c-4b14-a1c5-f0225cc14b2f user:1] base.py:35 - POST /auth/token/access [401] 0.0062s
2025-04-08 13:06:56,428 [INFO] [req_id:62c7c2cf-4cfc-4ebd-aa3f-f4e34f512af2 user:1] base.py:35 - POST /auth/token/access [200] 0.007s
2025-04-08 13:07:02,261 [INFO] [req_id:c091988b-b69a-43dc-b0ea-39c28bc0ae81 user:None] base.py:35 - GET /users/id/1 [200] 0.043s
2025-04-08 13:08:27,450 [INFO] [req_id:cdaf7ff3-fb23-4bec-9154-4df29503216d user:None] base.py:35 - GET /users/id/1 [200] 0.0291s
2025-04-08 13:08:31,033 [DEBUG] [req_id:38b02c9d-61bd-4aba-9d14-0ef5d7101bc9 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:08:31,112 [INFO] [req_id:38b02c9d-61bd-4aba-9d14-0ef5d7101bc9 user:None] base.py:35 - GET /users/id/1 [200] 0.1041s
2025-04-08 13:22:39,706 [WARNING] [req_id:ca5371e0-d505-4cfe-a40e-f84eb6c34c2a user:None] handlers.py:64 - Unhandled HTTPException: 404 - Not Found | POST /auth/register/login_id
2025-04-08 13:22:39,711 [INFO] [req_id:ca5371e0-d505-4cfe-a40e-f84eb6c34c2a user:None] base.py:35 - POST /auth/register/login_id [404] 0.0055s
2025-04-08 13:23:39,149 [WARNING] [req_id:98113a0f-e277-40d7-8f8e-29ec6c620207 user:None] handlers.py:64 - Unhandled HTTPException: 404 - Not Found | POST /auth/register/login_id
2025-04-08 13:23:39,153 [INFO] [req_id:98113a0f-e277-40d7-8f8e-29ec6c620207 user:None] base.py:35 - POST /auth/register/login_id [404] 0.0045s
2025-04-08 13:23:44,242 [WARNING] [req_id:25e5b2d2-c834-4dd9-a5d3-f1b4f44c69de user:None] handlers.py:35 - Validation failed: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {'nickname': 'test2', 'login_id': 'diajd2', 'password': '1234'}}, {'type': 'missing', 'loc': ('body', 'phone'), 'msg': 'Field required', 'input': {'nickname': 'test2', 'login_id': 'diajd2', 'password': '1234'}}]
2025-04-08 13:23:44,243 [INFO] [req_id:25e5b2d2-c834-4dd9-a5d3-f1b4f44c69de user:None] base.py:35 - POST /auth/register/login_id [422] 0.0101s
2025-04-08 13:25:17,574 [WARNING] [req_id:e6f3d23e-e8d1-4a28-a0aa-d27427a78641 user:None] handlers.py:35 - Validation failed: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {'nickname': 'test2', 'login_id': 'diajd2', 'password': '1234'}}, {'type': 'missing', 'loc': ('body', 'phone'), 'msg': 'Field required', 'input': {'nickname': 'test2', 'login_id': 'diajd2', 'password': '1234'}}]
2025-04-08 13:25:17,579 [INFO] [req_id:e6f3d23e-e8d1-4a28-a0aa-d27427a78641 user:None] base.py:35 - POST /auth/register/login_id [422] 0.0113s
2025-04-08 13:25:21,204 [DEBUG] [req_id:9f13415b-e27f-41a0-bdd0-c5af807c9df6 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:25:21,326 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('test2', None, None, None, '$2b$10$YGm411i1KH.kU21RsfWv8exKXZ0v/JUm6P7TJYyu7HyLhxnah6wGC', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/login_id
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 76, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 187, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('test2', None, None, None, '$2b$10$YGm411i1KH.kU21RsfWv8exKXZ0v/JUm6P7TJYyu7HyLhxnah6wGC', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:30:05,399 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('test2', None, None, None, '$2b$10$Z902uIc8CO8D0spIz1gkXOrmCtc8Qrab05xA6Qbigvkakzhllylv.', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/login_id
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 76, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 187, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('test2', None, None, None, '$2b$10$Z902uIc8CO8D0spIz1gkXOrmCtc8Qrab05xA6Qbigvkakzhllylv.', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:30:11,031 [DEBUG] [req_id:b91318ae-cfc0-4364-aa3d-033121db51dd user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:30:11,165 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('test2', None, None, None, '$2b$10$5QI3W/Bp.aGtY1BkXxIM6.6k3okv17O96YipH4R7gYONimjNhQIui', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/login_id
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1048, "Column 'email' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 76, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 187, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1048, "Column 'email' cannot be null")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('test2', None, None, None, '$2b$10$5QI3W/Bp.aGtY1BkXxIM6.6k3okv17O96YipH4R7gYONimjNhQIui', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:32:13,872 [DEBUG] [req_id:9d1e7b87-6775-4b73-aa8a-030ea4d8d77c user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:32:14,039 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: 3 validation errors for UserSchema
login_id
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
email
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
phone
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type | POST /auth/register/login_id
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 76, in register_user
    |     tokens = await auth_service.register_user(request)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 190, in register_user
    |     user_schema = UserSchema.model_validate(new_user)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\main.py", line 627, in model_validate
    |     return cls.__pydantic_validator__.validate_python(
    | pydantic_core._pydantic_core.ValidationError: 3 validation errors for UserSchema
    | login_id
    |   Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    |     For further information visit https://errors.pydantic.dev/2.10/v/string_type
    | email
    |   Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    |     For further information visit https://errors.pydantic.dev/2.10/v/string_type
    | phone
    |   Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    |     For further information visit https://errors.pydantic.dev/2.10/v/string_type
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 76, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 190, in register_user
    user_schema = UserSchema.model_validate(new_user)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 3 validation errors for UserSchema
login_id
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
email
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
phone
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-04-08 13:34:13,272 [WARNING] [req_id:5bebb8f5-fe74-4208-bf70-691a2a58713a user:None] handlers.py:64 - Unhandled HTTPException: 400 - 이미 등록된 email입니다. | POST /auth/register/login_id
2025-04-08 13:34:13,275 [INFO] [req_id:5bebb8f5-fe74-4208-bf70-691a2a58713a user:None] base.py:35 - POST /auth/register/login_id [400] 0.0202s
2025-04-08 13:34:30,577 [DEBUG] [req_id:317a2dab-9127-4b40-868c-0cf26a321b31 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:34:30,630 [WARNING] [req_id:317a2dab-9127-4b40-868c-0cf26a321b31 user:None] handlers.py:64 - Unhandled HTTPException: 400 - 이미 등록된 email입니다. | POST /auth/register/login_id
2025-04-08 13:34:30,631 [INFO] [req_id:317a2dab-9127-4b40-868c-0cf26a321b31 user:None] base.py:35 - POST /auth/register/login_id [400] 0.084s
2025-04-08 13:35:41,162 [INFO] [req_id:0b80fa89-ba01-4a1c-8742-f634969a625c user:None] base.py:35 - POST /auth/register/login_id [200] 0.1248s
2025-04-08 13:38:29,198 [INFO] [req_id:8ac6cd36-20fc-41de-b0fa-ce6a3fa4eade user:None] base.py:35 - POST /auth/register/login_id [200] 107.0171s
2025-04-08 13:39:27,506 [INFO] [req_id:ef5b037b-9427-49cb-a1c2-e29466e97c19 user:None] base.py:35 - POST /auth/register/login_id [200] 32.4763s
2025-04-08 13:42:02,674 [INFO] [req_id:1e869cd4-935c-4eee-9571-1076211e2ca8 user:None] base.py:35 - POST /auth/register/login_id [200] 9.7797s
2025-04-08 13:43:17,560 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: 'RegisterUserSchema' object has no attribute 'get' | POST /auth/register/login_id
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     ) = await request_body_to_args(  # body_params checked above
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 758, in request_body_to_args
    |     v_, errors_ = field.validate(value, values, loc=loc)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\_compat.py", line 127, in validate
    |     self._type_adapter.validate_python(value, from_attributes=True),
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\type_adapter.py", line 412, in validate_python
    |     return self.validator.validate_python(
    |   File "C:\Users\User\source\fastapi-core\src\auth\schemas\request.py", line 14, in at_least_one_identifier
    |     email = values.get("email")
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\main.py", line 891, in __getattr__
    |     raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
    | AttributeError: 'RegisterUserSchema' object has no attribute 'get'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    ) = await request_body_to_args(  # body_params checked above
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 758, in request_body_to_args
    v_, errors_ = field.validate(value, values, loc=loc)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\_compat.py", line 127, in validate
    self._type_adapter.validate_python(value, from_attributes=True),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\type_adapter.py", line 412, in validate_python
    return self.validator.validate_python(
  File "C:\Users\User\source\fastapi-core\src\auth\schemas\request.py", line 14, in at_least_one_identifier
    email = values.get("email")
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'RegisterUserSchema' object has no attribute 'get'
2025-04-08 13:44:29,010 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: 'RegisterUserSchema' object has no attribute 'get' | POST /auth/register/login_id
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    |     ) = await request_body_to_args(  # body_params checked above
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 758, in request_body_to_args
    |     v_, errors_ = field.validate(value, values, loc=loc)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\_compat.py", line 127, in validate
    |     self._type_adapter.validate_python(value, from_attributes=True),
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\type_adapter.py", line 412, in validate_python
    |     return self.validator.validate_python(
    |   File "C:\Users\User\source\fastapi-core\src\auth\schemas\request.py", line 14, in at_least_one_identifier
    |     if not (values.email or values.login_id or values.phone):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\main.py", line 891, in __getattr__
    |     raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
    | AttributeError: 'RegisterUserSchema' object has no attribute 'get'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 628, in solve_dependencies
    ) = await request_body_to_args(  # body_params checked above
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\dependencies\utils.py", line 758, in request_body_to_args
    v_, errors_ = field.validate(value, values, loc=loc)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\_compat.py", line 127, in validate
    self._type_adapter.validate_python(value, from_attributes=True),
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\type_adapter.py", line 412, in validate_python
    return self.validator.validate_python(
  File "C:\Users\User\source\fastapi-core\src\auth\schemas\request.py", line 14, in at_least_one_identifier
    if not (values.email or values.login_id or values.phone):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'RegisterUserSchema' object has no attribute 'get'
2025-04-08 13:44:39,806 [DEBUG] [req_id:ab1e6e02-5231-4331-98ac-09d372e9f8c0 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:44:45,279 [INFO] [req_id:ab1e6e02-5231-4331-98ac-09d372e9f8c0 user:None] base.py:35 - POST /auth/register/login_id [200] 10.5072s
2025-04-08 13:45:53,363 [INFO] [req_id:b6f84342-a051-4e4c-94cf-6cc86e8e39a7 user:None] base.py:35 - POST /auth/register/login_id [200] 42.0216s
2025-04-08 13:48:19,598 [INFO] [req_id:b6a03852-ebea-45c9-bf34-93b54c078fa1 user:None] base.py:35 - POST /auth/register/login_id [200] 67.4843s
2025-04-08 13:49:45,283 [DEBUG] [req_id:e142c4af-4095-4399-b61a-8277065925b1 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:49:45,485 [INFO] [req_id:e142c4af-4095-4399-b61a-8277065925b1 user:None] base.py:35 - POST /auth/register/login_id [200] 2.5269s
2025-04-08 13:50:12,688 [WARNING] [req_id:87968125-b16c-4796-a56b-5fa1f15d7c20 user:None] handlers.py:64 - Unhandled HTTPException: 400 - 이미 등록된 phone입니다. | POST /auth/register/email
2025-04-08 13:50:12,689 [INFO] [req_id:87968125-b16c-4796-a56b-5fa1f15d7c20 user:None] base.py:35 - POST /auth/register/email [400] 0.0329s
2025-04-08 13:51:40,434 [WARNING] [req_id:f38a215c-9f52-4f6a-b2d8-ef439142b3a5 user:None] handlers.py:64 - Unhandled HTTPException: 400 - 이미 등록된 phone입니다. | POST /auth/register/email
2025-04-08 13:51:40,437 [INFO] [req_id:f38a215c-9f52-4f6a-b2d8-ef439142b3a5 user:None] base.py:35 - POST /auth/register/email [400] 0.0537s
2025-04-08 13:51:44,157 [DEBUG] [req_id:094d114d-c621-435b-80d9-1ce7a1894867 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:51:44,312 [INFO] [req_id:094d114d-c621-435b-80d9-1ce7a1894867 user:None] base.py:35 - POST /auth/register/email [200] 0.1945s
2025-04-08 13:52:24,180 [WARNING] [req_id:862a0b5d-b8f3-4bbf-96cb-36e25bb53cc6 user:None] handlers.py:64 - Unhandled HTTPException: 404 - Not Found | POST /auth/register/phone
2025-04-08 13:52:24,181 [INFO] [req_id:862a0b5d-b8f3-4bbf-96cb-36e25bb53cc6 user:None] base.py:35 - POST /auth/register/phone [404] 0.002s
2025-04-08 13:52:44,371 [WARNING] [req_id:9aebbbd0-73f6-4c2c-806c-efc779bc9462 user:None] handlers.py:64 - Unhandled HTTPException: 404 - Not Found | POST /auth/register/phone
2025-04-08 13:52:44,375 [INFO] [req_id:9aebbbd0-73f6-4c2c-806c-efc779bc9462 user:None] base.py:35 - POST /auth/register/phone [404] 0.0045s
2025-04-08 13:52:47,894 [DEBUG] [req_id:30a8da54-a617-42e4-b81a-b055ed4c1057 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:52:48,021 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$dc.Gq0tbNccdA0TsfSVfDuqnAowrbX56OF908fxrgS3jBU6wyZp62', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/phone
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 86, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 189, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$dc.Gq0tbNccdA0TsfSVfDuqnAowrbX56OF908fxrgS3jBU6wyZp62', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:55:38,925 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$Ss.K5EwqzG8AjcB3erZR7O0dGrkZcy0wnvYZharldYa8SdmR1/UBC', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/phone
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 86, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 189, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$Ss.K5EwqzG8AjcB3erZR7O0dGrkZcy0wnvYZharldYa8SdmR1/UBC', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:55:42,626 [DEBUG] [req_id:3e5dcd29-4278-41fe-b4a5-6e7f262b8c3a user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:55:42,761 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$tpIfSt/vv6JKC7uV1DXlT.Wy5ZdColwPcvuQRuvmQ7Q3TkvUW7SzK', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/phone
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 86, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 189, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$tpIfSt/vv6JKC7uV1DXlT.Wy5ZdColwPcvuQRuvmQ7Q3TkvUW7SzK', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:55:59,189 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$sfUWHQPl1wupRdrumHiQUuoATtvipIlrgNqTyHNthyjMYWtE6EUhe', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/phone
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 86, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 189, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$sfUWHQPl1wupRdrumHiQUuoATtvipIlrgNqTyHNthyjMYWtE6EUhe', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:56:02,805 [DEBUG] [req_id:01033806-5a43-488c-a919-b5cb48e246c0 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:56:02,930 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$l3OgGACxZPsL.NTszEFclOWFpTqr1qchNf6Rd3..lFCqVt0td0UZ2', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/phone
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 86, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 189, in register_user
    new_user = await self.user_repository.create_user(new_user_model)
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$l3OgGACxZPsL.NTszEFclOWFpTqr1qchNf6Rd3..lFCqVt0td0UZ2', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:58:15,919 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$VnVbgw/ZuXbrmxLA8/bUOe0om8EplUl/peYqEFbWBDoxI//OVKGN.', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj) | POST /auth/register/phone
Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 86, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 189, in register_user
    # 레포지토리에 저장
  File "C:\Users\User\source\fastapi-core\src\user\repository.py", line 31, in create_user
    await self.session.commit()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1062, "Duplicate entry 'tes2t' for key 'user.nickname'")
[SQL: INSERT INTO user (nickname, email, login_id, phone, password, `role`) VALUES (%s, %s, %s, %s, %s, %s)]
[parameters: ('tes2t', None, None, '010-8903-5627', '$2b$10$VnVbgw/ZuXbrmxLA8/bUOe0om8EplUl/peYqEFbWBDoxI//OVKGN.', 'USER')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-08 13:58:19,532 [DEBUG] [req_id:ba9ef3d8-5164-4634-8334-c64a3aa15b59 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 13:58:19,582 [WARNING] [req_id:ba9ef3d8-5164-4634-8334-c64a3aa15b59 user:None] handlers.py:64 - Unhandled HTTPException: 400 - 이미 등록된 nickname입니다. | POST /auth/register/phone
2025-04-08 13:58:19,583 [INFO] [req_id:ba9ef3d8-5164-4634-8334-c64a3aa15b59 user:None] base.py:35 - POST /auth/register/phone [400] 0.0983s
2025-04-08 13:58:33,438 [INFO] [req_id:66fddc80-be2e-4a28-8699-a63df2732256 user:None] base.py:35 - POST /auth/register/phone [200] 0.1232s
2025-04-08 13:59:01,313 [INFO] [req_id:309764bc-5de4-4694-8a35-ca440f6f4e93 user:None] base.py:35 - POST /auth/register/phone [200] 0.1278s
2025-04-08 14:01:38,705 [WARNING] [req_id:ec76ff0e-030d-4515-b6eb-01119b339aa9 user:None] handlers.py:64 - Unhandled HTTPException: 400 - 이미 등록된 phone입니다. | POST /auth/register/phone
2025-04-08 14:01:38,708 [INFO] [req_id:ec76ff0e-030d-4515-b6eb-01119b339aa9 user:None] base.py:35 - POST /auth/register/phone [400] 0.0463s
2025-04-08 14:01:44,642 [WARNING] [req_id:6129a1e2-a940-41da-bbdb-c5d884b4e1c4 user:None] handlers.py:35 - Validation failed: [{'type': 'value_error', 'loc': ('body', 'phone'), 'msg': "Value error, 전화번호는 '-' 없이 숫자만 입력해주세요.", 'input': '010-8903-5628', 'ctx': {'error': ValueError("전화번호는 '-' 없이 숫자만 입력해주세요.")}}]
2025-04-08 14:01:44,645 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: Object of type ValueError is not JSON serializable | POST /auth/register/phone
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 75, in wrapped_app
    |     response = await handler(conn, exc)
    |   File "C:\Users\User\source\fastapi-core\src\common\exceptions\handlers.py", line 36, in validation_exception_handler
    |     return JSONResponse(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 184, in __init__
    |     super().__init__(content, status_code, headers, media_type, background)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 41, in __init__
    |     self.body = self.render(content)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 187, in render
    |     return json.dumps(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\__init__.py", line 238, in dumps
    |     **kw).encode(obj)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 199, in encode
    |     chunks = self.iterencode(o, _one_shot=True)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 257, in iterencode
    |     return _iterencode(o, 0)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 179, in default
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    | TypeError: Object of type ValueError is not JSON serializable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 75, in wrapped_app
    response = await handler(conn, exc)
  File "C:\Users\User\source\fastapi-core\src\common\exceptions\handlers.py", line 36, in validation_exception_handler
    return JSONResponse(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
  File "c:\Users\User\anaconda3\envs\backend\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ValueError is not JSON serializable
2025-04-08 14:08:12,642 [WARNING] [req_id:4ae48b03-8884-483b-93f2-39c1887b4ed4 user:None] handlers.py:35 - Validation failed: [{'type': 'value_error', 'loc': ('body', 'phone'), 'msg': "Value error, 전화번호는 '-' 없이 숫자만 입력해주세요.", 'input': '010-8903-5628', 'ctx': {'error': ValueError("전화번호는 '-' 없이 숫자만 입력해주세요.")}}]
2025-04-08 14:08:12,649 [ERROR] [req_id:None user:None] handlers.py:89 - Unexpected server error: Object of type ValueError is not JSON serializable | POST /auth/register/phone
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 75, in wrapped_app
    |     response = await handler(conn, exc)
    |   File "C:\Users\User\source\fastapi-core\src\common\exceptions\handlers.py", line 36, in validation_exception_handler
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 184, in __init__
    |     super().__init__(content, status_code, headers, media_type, background)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 41, in __init__
    |     self.body = self.render(content)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 187, in render
    |     return json.dumps(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\__init__.py", line 238, in dumps
    |     **kw).encode(obj)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 199, in encode
    |     chunks = self.iterencode(o, _one_shot=True)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 257, in iterencode
    |     return _iterencode(o, 0)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 179, in default
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    | TypeError: Object of type ValueError is not JSON serializable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 75, in wrapped_app
    response = await handler(conn, exc)
  File "C:\Users\User\source\fastapi-core\src\common\exceptions\handlers.py", line 36, in validation_exception_handler
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
  File "c:\Users\User\anaconda3\envs\backend\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "c:\Users\User\anaconda3\envs\backend\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ValueError is not JSON serializable
2025-04-08 14:08:16,141 [WARNING] [req_id:1af6f706-85c3-4b81-b067-548b0225861f user:None] handlers.py:35 - Validation failed: [{'type': 'value_error', 'loc': ('body', 'phone'), 'msg': "Value error, 전화번호는 '-' 없이 숫자만 입력해주세요.", 'input': '010-8903-5628', 'ctx': {'error': ValueError("전화번호는 '-' 없이 숫자만 입력해주세요.")}}]
2025-04-08 14:08:16,143 [INFO] [req_id:1af6f706-85c3-4b81-b067-548b0225861f user:None] base.py:35 - POST /auth/register/phone [422] 0.0177s
2025-04-08 14:13:17,194 [WARNING] [req_id:451d0f5f-33f0-45e4-85dd-5b019e0c09cb user:None] handlers.py:35 - Validation failed: [{'type': 'value_error', 'loc': ('body', 'phone'), 'msg': "Value error, 전화번호는 '-' 없이 숫자만 입력해주세요.", 'input': '010-8903-5628', 'ctx': {'error': ValueError("전화번호는 '-' 없이 숫자만 입력해주세요.")}}]
2025-04-08 14:13:17,195 [INFO] [req_id:451d0f5f-33f0-45e4-85dd-5b019e0c09cb user:None] base.py:35 - POST /auth/register/phone [422] 0.019s
2025-04-08 14:13:28,191 [WARNING] [req_id:9a5b49ce-b234-4745-ab59-f4d2c50ef880 user:None] handlers.py:35 - Validation failed: [{'type': 'value_error', 'loc': ('body', 'phone'), 'msg': 'Value error, 전화번호는 숫자만 입력해주세요.', 'input': '010890d5628', 'ctx': {'error': ValueError('전화번호는 숫자만 입력해주세요.')}}]
2025-04-08 14:13:28,193 [INFO] [req_id:9a5b49ce-b234-4745-ab59-f4d2c50ef880 user:None] base.py:35 - POST /auth/register/phone [422] 0.006s
2025-04-08 14:13:33,518 [DEBUG] [req_id:14d9415f-fa98-4cc9-acfb-30196ec6747a user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 14:13:33,686 [INFO] [req_id:14d9415f-fa98-4cc9-acfb-30196ec6747a user:None] base.py:35 - POST /auth/register/phone [200] 0.1977s
2025-04-08 14:14:23,821 [WARNING] [req_id:1018f4a3-c9d1-465d-b7f8-63bccc862ea9 user:None] handlers.py:76 - Unhandled HTTPException: 400 - 이미 등록된 email입니다. | POST /auth/register/phone
2025-04-08 14:14:23,822 [INFO] [req_id:1018f4a3-c9d1-465d-b7f8-63bccc862ea9 user:None] base.py:35 - POST /auth/register/phone [400] 0.0569s
2025-04-08 14:14:30,353 [WARNING] [req_id:e050850f-243e-45c2-98eb-a06da85c8ba0 user:None] handlers.py:76 - Unhandled HTTPException: 400 - 이미 등록된 phone입니다. | POST /auth/register/phone
2025-04-08 14:14:30,354 [INFO] [req_id:e050850f-243e-45c2-98eb-a06da85c8ba0 user:None] base.py:35 - POST /auth/register/phone [400] 0.0167s
2025-04-08 14:14:34,756 [WARNING] [req_id:da7604a8-7907-4013-abf4-72f3032c9321 user:None] handlers.py:76 - Unhandled HTTPException: 400 - 이미 등록된 nickname입니다. | POST /auth/register/phone
2025-04-08 14:14:34,757 [INFO] [req_id:da7604a8-7907-4013-abf4-72f3032c9321 user:None] base.py:35 - POST /auth/register/phone [400] 0.0198s
2025-04-08 14:14:40,215 [INFO] [req_id:72791b72-1569-4766-a9ca-99a253c37379 user:None] base.py:35 - POST /auth/register/phone [200] 0.2316s
2025-04-08 14:14:51,091 [INFO] [req_id:4f322a3d-1580-4373-8564-cbdf975ea143 user:None] base.py:35 - POST /auth/register/email [200] 0.0951s
2025-04-08 14:15:13,268 [INFO] [req_id:df477154-bec3-4271-a155-b2e47f358f3c user:22] base.py:35 - POST /auth/logout [200] 0.0045s
2025-04-08 15:24:10,260 [DEBUG] [req_id:941d42b8-e8b1-4496-ac53-3966203611a9 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 15:24:10,418 [INFO] [req_id:941d42b8-e8b1-4496-ac53-3966203611a9 user:None] base.py:35 - POST /auth/login/email [200] 0.2087s
2025-04-08 15:58:55,563 [DEBUG] [req_id:7c2d9869-6982-4f66-9c22-f486a4d68ba7 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 15:58:55,765 [INFO] [req_id:7c2d9869-6982-4f66-9c22-f486a4d68ba7 user:None] base.py:35 - POST /auth/register/email [200] 0.2513s
2025-04-08 15:59:00,437 [DEBUG] [req_id:2d5eafd4-6d88-4741-9fc0-b761c6b50248 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 15:59:00,495 [ERROR] [req_id:None user:None] handlers.py:101 - Unexpected server error: '이미 등록된 email입니다.' is not a valid HTTPStatus | POST /auth/register/email
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 63, in register_user
    |     tokens = await auth_service.register_user(request)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 140, in register_user
    |     raise HTTPException(f"이미 등록된 {field}입니다.")
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\exceptions.py", line 65, in __init__
    |     super().__init__(status_code=status_code, detail=detail, headers=headers)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\exceptions.py", line 18, in __init__
    |     detail = http.HTTPStatus(status_code).phrase
    |   File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 385, in __call__
    |     return cls.__new__(cls, value)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 710, in __new__
    |     raise ve_exc
    | ValueError: '이미 등록된 email입니다.' is not a valid HTTPStatus
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 63, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 140, in register_user
    raise HTTPException(f"이미 등록된 {field}입니다.")
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\exceptions.py", line 65, in __init__
    super().__init__(status_code=status_code, detail=detail, headers=headers)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\exceptions.py", line 18, in __init__
    detail = http.HTTPStatus(status_code).phrase
  File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 385, in __call__
    return cls.__new__(cls, value)
  File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 710, in __new__
    raise ve_exc
ValueError: '이미 등록된 email입니다.' is not a valid HTTPStatus
2025-04-08 15:59:16,265 [DEBUG] [req_id:23c1b2f0-bfba-49fa-8eb4-07c0ed35af5e user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 15:59:16,425 [INFO] [req_id:23c1b2f0-bfba-49fa-8eb4-07c0ed35af5e user:None] base.py:35 - POST /auth/register/email [200] 0.1996s
2025-04-08 16:01:44,286 [INFO] [req_id:b12744d2-fb56-4d49-8b43-1ca7bb4941a4 user:None] base.py:35 - POST /auth/login/email [200] 0.1231s
2025-04-08 16:01:47,950 [DEBUG] [req_id:be245361-679e-4f7c-b599-848fe028e905 user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 16:01:48,097 [INFO] [req_id:be245361-679e-4f7c-b599-848fe028e905 user:None] base.py:35 - POST /auth/login/email [200] 0.1744s
2025-04-08 16:02:00,829 [INFO] [req_id:b5c2c247-5d6a-40f0-8a98-805edbb844d2 user:None] base.py:35 - POST /auth/login/login_id [200] 0.1201s
2025-04-08 16:02:15,007 [WARNING] [req_id:acb370f8-f057-4529-a4df-eb1d62d28e62 user:None] handlers.py:76 - Unhandled HTTPException: 401 - 비밀번호가 일치하지 않습니다. | POST /auth/login/login_id
2025-04-08 16:02:15,010 [INFO] [req_id:acb370f8-f057-4529-a4df-eb1d62d28e62 user:None] base.py:35 - POST /auth/login/login_id [401] 0.0895s
2025-04-08 16:02:17,754 [INFO] [req_id:7e922879-b2d9-4fa2-8877-955d919e19a0 user:None] base.py:35 - POST /auth/login/login_id [200] 0.0898s
2025-04-08 16:02:20,321 [WARNING] [req_id:ab5d921e-79d1-4aaf-be0e-0c6d7418b8be user:None] handlers.py:76 - Unhandled HTTPException: 401 - 존재하지 않는 사용자입니다. | POST /auth/login/login_id
2025-04-08 16:02:20,321 [INFO] [req_id:ab5d921e-79d1-4aaf-be0e-0c6d7418b8be user:None] base.py:35 - POST /auth/login/login_id [401] 0.0055s
2025-04-08 16:02:26,399 [ERROR] [req_id:None user:None] handlers.py:101 - Unexpected server error: '이미 등록된 email입니다.' is not a valid HTTPStatus | POST /auth/register/email
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 63, in register_user
    |     tokens = await auth_service.register_user(request)
    |   File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 140, in register_user
    |     raise HTTPException(f"이미 등록된 {field}입니다.")
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\exceptions.py", line 65, in __init__
    |     super().__init__(status_code=status_code, detail=detail, headers=headers)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\exceptions.py", line 18, in __init__
    |     detail = http.HTTPStatus(status_code).phrase
    |   File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 385, in __call__
    |     return cls.__new__(cls, value)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 710, in __new__
    |     raise ve_exc
    | ValueError: '이미 등록된 email입니다.' is not a valid HTTPStatus
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\auth\route.py", line 63, in register_user
    tokens = await auth_service.register_user(request)
  File "C:\Users\User\source\fastapi-core\src\auth\service.py", line 140, in register_user
    raise HTTPException(f"이미 등록된 {field}입니다.")
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\exceptions.py", line 65, in __init__
    super().__init__(status_code=status_code, detail=detail, headers=headers)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\exceptions.py", line 18, in __init__
    detail = http.HTTPStatus(status_code).phrase
  File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 385, in __call__
    return cls.__new__(cls, value)
  File "c:\Users\User\anaconda3\envs\backend\lib\enum.py", line 710, in __new__
    raise ve_exc
ValueError: '이미 등록된 email입니다.' is not a valid HTTPStatus
2025-04-08 16:04:15,739 [DEBUG] [req_id:19d25491-61fe-4325-a1f0-dea39f853e8b user:None] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 16:04:15,793 [WARNING] [req_id:19d25491-61fe-4325-a1f0-dea39f853e8b user:None] handlers.py:15 - Handled AppException: CONFLICT - 이미 등록된 email입니다.
2025-04-08 16:04:15,794 [INFO] [req_id:19d25491-61fe-4325-a1f0-dea39f853e8b user:None] base.py:35 - POST /auth/register/email [409] 0.0945s
2025-04-08 16:04:24,556 [WARNING] [req_id:d7d52c35-8d7a-4f94-acb3-263877490282 user:None] handlers.py:15 - Handled AppException: CONFLICT - 이미 등록된 nickname입니다.
2025-04-08 16:04:24,557 [INFO] [req_id:d7d52c35-8d7a-4f94-acb3-263877490282 user:None] base.py:35 - POST /auth/register/email [409] 0.0182s
2025-04-08 16:04:28,673 [INFO] [req_id:9a198b1c-2d76-46ce-beca-42e080aed81d user:None] base.py:35 - POST /auth/register/email [200] 0.1226s
2025-04-08 16:25:31,530 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:628 - Calling on_part_begin with no data
2025-04-08 16:25:31,534 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:625 - Calling on_header_field with data[54:73]
2025-04-08 16:25:31,534 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:625 - Calling on_header_value with data[75:111]
2025-04-08 16:25:31,535 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:628 - Calling on_header_end with no data
2025-04-08 16:25:31,536 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:628 - Calling on_headers_finished with no data
2025-04-08 16:25:31,537 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:628 - Calling on_part_end with no data
2025-04-08 16:25:31,538 [DEBUG] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] multipart.py:628 - Calling on_end with no data
2025-04-08 16:25:31,551 [WARNING] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] handlers.py:76 - Unhandled HTTPException: 400 - jpg/jpeg/png 파일만 업로드 가능합니다. | POST /common/image
2025-04-08 16:25:31,553 [INFO] [req_id:579440dd-c543-42b9-b891-405f814aeeb7 user:25] base.py:35 - POST /common/image [400] 0.0274s
2025-04-08 16:25:35,645 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:628 - Calling on_part_begin with no data
2025-04-08 16:25:35,647 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:625 - Calling on_header_field with data[54:73]
2025-04-08 16:25:35,647 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:625 - Calling on_header_value with data[75:111]
2025-04-08 16:25:35,648 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:628 - Calling on_header_end with no data
2025-04-08 16:25:35,648 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:628 - Calling on_headers_finished with no data
2025-04-08 16:25:35,649 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:628 - Calling on_part_end with no data
2025-04-08 16:25:35,649 [DEBUG] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] multipart.py:628 - Calling on_end with no data
2025-04-08 16:25:35,651 [WARNING] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] handlers.py:76 - Unhandled HTTPException: 400 - jpg/jpeg/png 파일만 업로드 가능합니다. | POST /common/image
2025-04-08 16:25:35,651 [INFO] [req_id:3f7e4c5e-f467-4410-8f81-02e3c4ab5f50 user:25] base.py:35 - POST /common/image [400] 0.0096s
2025-04-08 16:25:49,236 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:628 - Calling on_part_begin with no data
2025-04-08 16:25:49,238 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_header_field with data[54:73]
2025-04-08 16:25:49,238 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_header_value with data[75:174]
2025-04-08 16:25:49,239 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:628 - Calling on_header_end with no data
2025-04-08 16:25:49,240 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_header_field with data[176:188]
2025-04-08 16:25:49,240 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_header_value with data[190:200]
2025-04-08 16:25:49,240 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:628 - Calling on_header_end with no data
2025-04-08 16:25:49,240 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:628 - Calling on_headers_finished with no data
2025-04-08 16:25:49,242 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_part_data with data[204:65740]
2025-04-08 16:25:49,245 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_part_data with data[0:65536]
2025-04-08 16:25:49,249 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_part_data with data[0:262144]
2025-04-08 16:25:49,253 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:625 - Calling on_part_data with data[0:12905]
2025-04-08 16:25:49,254 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:628 - Calling on_part_end with no data
2025-04-08 16:25:49,254 [DEBUG] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] multipart.py:628 - Calling on_end with no data
2025-04-08 16:25:49,267 [INFO] [req_id:985017d5-eef6-4bea-a990-b774f9d41127 user:25] base.py:35 - POST /common/image [200] 0.0334s
2025-04-08 16:25:58,971 [DEBUG] [req_id:94a97a63-7740-4eb1-ad2e-4e6d576a76e8 user:25] connection.py:951 - caching sha2: succeeded by fast path.
2025-04-08 16:25:59,058 [ERROR] [req_id:None user:25] handlers.py:101 - Unexpected server error: A transaction is already begun on this Session. | POST /posts
  + Exception Group Traceback (most recent call last):
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\anyio\_backends\_asyncio.py", line 767, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    |     return await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    |     response = await call_next(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    |     response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    |     raw_response = await run_endpoint_function(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "C:\Users\User\source\fastapi-core\src\post\route.py", line 48, in create_post
    |     async with session.begin():
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\base.py", line 121, in __aenter__
    |     return await self.start(is_ctxmanager=True)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1872, in start
    |     await greenlet_spawn(
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    |     result = context.switch(*args, **kwargs)
    |   File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1943, in begin
    |     raise sa_exc.InvalidRequestError(
    | sqlalchemy.exc.InvalidRequestError: A transaction is already begun on this Session.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 59, in auth_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 64, in redis_middleware
    return await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 42, in db_session_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 25, in log_context_middleware
    response = await call_next(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "c:\Users\User\anaconda3\envs\backend\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "C:\Users\User\source\fastapi-core\src\common\middleware\base.py", line 32, in request_logger_middleware
    response = await call_next(request) #  여기까지가 다른 미들웨어들 먼저 실행됨
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\User\source\fastapi-core\src\post\route.py", line 48, in create_post
    async with session.begin():
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\base.py", line 121, in __aenter__
    return await self.start(is_ctxmanager=True)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1872, in start
    await greenlet_spawn(
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "c:\Users\User\anaconda3\envs\backend\lib\site-packages\sqlalchemy\orm\session.py", line 1943, in begin
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: A transaction is already begun on this Session.
2025-04-08 16:27:45,416 [INFO] [req_id:58beabdf-db91-4b94-a1b9-b641bb6d7d3b user:25] base.py:35 - POST /posts [200] 0.1283s
2025-04-08 16:28:04,255 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:628 - Calling on_part_begin with no data
2025-04-08 16:28:04,256 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_header_field with data[54:73]
2025-04-08 16:28:04,256 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_header_value with data[75:174]
2025-04-08 16:28:04,256 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:628 - Calling on_header_end with no data
2025-04-08 16:28:04,257 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_header_field with data[176:188]
2025-04-08 16:28:04,258 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_header_value with data[190:200]
2025-04-08 16:28:04,258 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:628 - Calling on_header_end with no data
2025-04-08 16:28:04,259 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:628 - Calling on_headers_finished with no data
2025-04-08 16:28:04,261 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_part_data with data[204:131276]
2025-04-08 16:28:04,264 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_part_data with data[0:262144]
2025-04-08 16:28:04,267 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:625 - Calling on_part_data with data[0:12905]
2025-04-08 16:28:04,268 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:628 - Calling on_part_end with no data
2025-04-08 16:28:04,269 [DEBUG] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] multipart.py:628 - Calling on_end with no data
2025-04-08 16:28:04,276 [INFO] [req_id:c2b7a978-c36c-47c0-8b50-8f9ae417ea37 user:25] base.py:35 - POST /common/image [200] 0.0245s
2025-04-08 16:28:29,672 [INFO] [req_id:fa1eb9fa-069c-4ee5-b630-c5d57a287ca2 user:25] base.py:35 - POST /posts [200] 0.0708s
2025-04-08 16:28:40,155 [INFO] [req_id:cacde8d1-06bc-401a-9404-e2cd6a059f4b user:25] base.py:35 - GET /posts [200] 0.0389s
2025-04-08 16:28:43,605 [WARNING] [req_id:add02711-584f-4e45-8da2-2577742688ac user:25] handlers.py:76 - Unhandled HTTPException: 400 - 존재하지 않는 이미지입니다. | POST /posts
2025-04-08 16:28:43,606 [INFO] [req_id:add02711-584f-4e45-8da2-2577742688ac user:25] base.py:35 - POST /posts [400] 0.0509s
